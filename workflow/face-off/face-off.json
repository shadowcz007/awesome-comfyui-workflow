{"last_node_id":1220,"last_link_id":2387,"nodes":[{"id":727,"type":"Image Crop Location","pos":[-2003.3230644810951,-326.4785612046118],"size":{"0":310,"1":114},"flags":{},"order":27,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1312,"label":"图像"},{"name":"top","type":"INT","link":1308,"widget":{"name":"top"},"label":"上"},{"name":"left","type":"INT","link":1309,"widget":{"name":"left"},"label":"左"},{"name":"right","type":"INT","link":1310,"widget":{"name":"right"},"label":"右"},{"name":"bottom","type":"INT","link":1311,"widget":{"name":"bottom"},"label":"下"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1326],"shape":3,"label":"图像","slot_index":0},{"name":"CROP_DATA","type":"CROP_DATA","links":null,"shape":3,"label":"裁剪数据","slot_index":1}],"properties":{"Node name for S&R":"Image Crop Location"},"widgets_values":[0,0,256,256]},{"id":756,"type":"ImageScale","pos":[-1035.9372819119264,-985.6963177995224],"size":{"0":315,"1":130},"flags":{},"order":29,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1367,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1368,1430],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":307,"type":"BboxDetectorSEGS","pos":[-2018.7093318685097,-977.3599421078811],"size":{"0":315,"1":212.00003051757812},"flags":{},"order":17,"mode":0,"inputs":[{"name":"bbox_detector","type":"BBOX_DETECTOR","link":2097,"label":"BBox检测","slot_index":0},{"name":"image","type":"IMAGE","link":1305,"label":"图像"},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"detailer_hook"}],"outputs":[{"name":"SEGS","type":"SEGS","links":[590],"shape":3,"label":"Seg","slot_index":0}],"properties":{"Node name for S&R":"BboxDetectorSEGS"},"widgets_values":[0.2,0,1,10,"all"]},{"id":697,"type":"PreviewImage","pos":[-801.709075191272,-677.7753022763197],"size":{"0":210,"1":246},"flags":{},"order":51,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1233,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":349,"type":"IPAdapterModelLoader","pos":[601.6760602180965,-384.9189169257856],"size":{"0":315,"1":58},"flags":{},"order":0,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[647],"shape":3,"label":"IP适配","slot_index":0}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-plus_sd15.bin"]},{"id":308,"type":"UltralyticsDetectorProvider","pos":[-2022.156401170342,-1094.4349993530902],"size":{"0":315,"1":78},"flags":{},"order":1,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[2097],"shape":3,"label":"BBox检测","slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":null,"shape":3,"label":"SEGM检测"}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8n_v2.pt"]},{"id":309,"type":"SAMLoader","pos":[-1692.1564011703426,-1094.4349993530902],"size":{"0":315,"1":82},"flags":{},"order":2,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[589],"shape":3,"label":"SAM模型","slot_index":0}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_h_4b8939.pth","Prefer GPU"]},{"id":306,"type":"SAMDetectorCombined","pos":[-1682.1564011703426,-974.43499935309],"size":{"0":300,"1":220},"flags":{},"order":20,"mode":0,"inputs":[{"name":"sam_model","type":"SAM_MODEL","link":589,"label":"SAM模型","slot_index":0},{"name":"segs","type":"SEGS","link":590,"label":"Seg"},{"name":"image","type":"IMAGE","link":1306,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[1307,1912],"slot_index":0,"label":"遮罩"}],"properties":{"Node name for S&R":"SAMDetectorCombined"},"widgets_values":["center-1",0,0.6,0,0.2,"False"]},{"id":868,"type":"PreviewImage","pos":[2954.736854544806,-1099.7136540013273],"size":{"0":210,"1":250},"flags":{},"order":63,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1902,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":294,"type":"ACN_AdvancedControlNetApply","pos":[-438.5998991530339,-991.680821504265],"size":{"0":342.5999755859375,"1":246},"flags":{},"order":39,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":569,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":570,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":571,"label":"ControlNet","slot_index":2},{"name":"image","type":"IMAGE","link":572,"label":"图像"},{"name":"mask_optional","type":"MASK","link":null,"label":"遮罩"},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":2171,"label":"帧间隔"},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null,"label":""},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":2170,"label":"weights_override","slot_index":7}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[2247],"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":[2248],"shape":3,"label":"负面条件","slot_index":1}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[0.8,0,0.4]},{"id":295,"type":"ControlNetLoader","pos":[-438.5998991530339,-1111.6808215042654],"size":{"0":350,"1":60},"flags":{},"order":3,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[571],"shape":3,"label":"ControlNet","slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["control_v11p_sd15_canny.pth"]},{"id":328,"type":"CannyEdgePreprocessor","pos":[-428.59989915303413,-681.680821504265],"size":{"0":315,"1":106},"flags":{},"order":34,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1339,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[572,626],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"CannyEdgePreprocessor"},"widgets_values":[100,200,512]},{"id":1166,"type":"ControlNetLoader","pos":[-38.599899153034734,-1101.680821504265],"size":{"0":315,"1":58},"flags":{},"order":4,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[2241],"shape":3,"label":"ControlNet"}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["control_v11p_sd15_inpaint.pth"]},{"id":694,"type":"Mask Contour","pos":[-1041.7090751912722,-647.7753022763197],"size":{"0":210,"1":26},"flags":{},"order":37,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1374,"label":"mask","slot_index":0}],"outputs":[{"name":"MASK","type":"MASK","links":[1229],"shape":3,"label":"MASK","slot_index":0}],"properties":{"Node name for S&R":"Mask Contour"}},{"id":1134,"type":"ScaledSoftControlNetWeights","pos":[-67.08213394991085,-543.6895716839526],"size":{"0":315,"1":102},"flags":{},"order":5,"mode":0,"outputs":[{"name":"CN_WEIGHTS","type":"CONTROL_NET_WEIGHTS","links":[2170,2242],"shape":3,"label":"ControlNet权重","slot_index":0},{"name":"TK_SHORTCUT","type":"TIMESTEP_KEYFRAME","links":[2171,2243],"shape":3,"label":"帧间隔","slot_index":1}],"properties":{"Node name for S&R":"ScaledSoftControlNetWeights"},"widgets_values":[0.825,false]},{"id":757,"type":"ImageToMask","pos":[-1027.3617352556766,-1100.9786721510843],"size":{"0":315,"1":58},"flags":{},"order":31,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1368,"label":"图像"}],"outputs":[{"name":"MASK","type":"MASK","links":[1374,2265],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"ImageToMask"},"widgets_values":["red"]},{"id":1014,"type":"PreviewImage","pos":[-1332.156401170343,-1014.43499935309],"size":{"0":210,"1":250},"flags":{},"order":28,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1913,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1013,"type":"MaskToImage","pos":[-1322.156401170343,-1104.4349993530902],"size":{"0":210,"1":26},"flags":{},"order":25,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1912,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1913],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":788,"type":"PreviewImage","pos":[-687.3617352556769,-1110.9786721510843],"size":{"0":210,"1":246},"flags":{},"order":32,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1430,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1020,"type":"CLIPVisionLoader","pos":[601.6760602180965,-504.91891692578514],"size":{"0":315,"1":58},"flags":{},"order":6,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[1933],"shape":3,"label":"CLIP视觉","slot_index":0}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["SD1.5\\model.safetensors"]},{"id":1032,"type":"MaskToImage","pos":[361.6760602180953,-174.91891692578508],"size":{"0":210,"1":26},"flags":{},"order":44,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1963,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1964],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":318,"type":"IPAdapterModelLoader","pos":[667.4226180747817,-1001.928211328125],"size":{"0":315,"1":58},"flags":{},"order":7,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[607],"shape":3,"label":"IP适配"}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-plus-face_sd15.bin"]},{"id":311,"type":"MaskToImage","pos":[-997.3617352556769,-810.9786721510858],"size":{"0":210,"1":26},"flags":{},"order":26,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1333,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1367],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":728,"type":"PreviewImage","pos":[-1632.722468016474,-629.7276886940548],"size":{"0":210,"1":246},"flags":{},"order":33,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1327,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":726,"type":"Mask Crop Region","pos":[-1983.6957524609322,-608.5502054492189],"size":{"0":315,"1":222},"flags":{},"order":24,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1307,"label":"遮罩"}],"outputs":[{"name":"cropped_mask","type":"MASK","links":[1333],"shape":3,"label":"遮罩","slot_index":0},{"name":"crop_data","type":"CROP_DATA","links":[2355],"shape":3,"label":"裁剪数据","slot_index":1},{"name":"top_int","type":"INT","links":[1308],"shape":3,"label":"上","slot_index":2},{"name":"left_int","type":"INT","links":[1309],"shape":3,"label":"左","slot_index":3},{"name":"right_int","type":"INT","links":[1310],"shape":3,"label":"右","slot_index":4},{"name":"bottom_int","type":"INT","links":[1311],"shape":3,"label":"下","slot_index":5},{"name":"width_int","type":"INT","links":null,"shape":3,"label":"宽度"},{"name":"height_int","type":"INT","links":null,"shape":3,"label":"高度"}],"properties":{"Node name for S&R":"Mask Crop Region"},"widgets_values":[32,"dominant"]},{"id":319,"type":"CLIPVisionLoader","pos":[657.4226180747817,-1111.928211328125],"size":{"0":315,"1":58},"flags":{},"order":8,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[2048],"shape":3,"label":"CLIP视觉","slot_index":0}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["SD1.5\\model.safetensors"]},{"id":1150,"type":"Image Filter Adjustments","pos":[317.42261807478167,-1111.928211328125],"size":{"0":315,"1":226},"flags":{},"order":19,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2270,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2204,2206],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"Image Filter Adjustments"},"widgets_values":[0,1,0,1,0,0,0,"false"]},{"id":1031,"type":"PreviewImage","pos":[2352.875165877798,-760],"size":{"0":210,"1":250},"flags":{},"order":61,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1960,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":329,"type":"PreviewImage","pos":[-420,-530],"size":{"0":310,"1":250},"flags":{},"order":40,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":626,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1033,"type":"PreviewImage","pos":[362.9374317829218,-480],"size":{"0":210,"1":250},"flags":{},"order":48,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":1964,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1016,"type":"InvertMask","pos":[352.9374317829218,-80],"size":{"0":210,"1":26},"flags":{},"order":38,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2265,"label":"遮罩","slot_index":0}],"outputs":[{"name":"MASK","type":"MASK","links":[1963,2268],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"InvertMask"}},{"id":1151,"type":"PreviewImage","pos":[344.12507539900014,-840],"size":{"0":260,"1":250},"flags":{},"order":22,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2204,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1133,"type":"PreviewImage","pos":[2933.1314308761234,-672.4204050781249],"size":{"0":290,"1":250},"flags":{},"order":66,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2167,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":348,"type":"IPAdapterApply","pos":[611.676060218096,-264.91891692578514],"size":{"0":320,"1":260},"flags":{},"order":45,"mode":0,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":647,"label":"IP适配","slot_index":0},{"name":"clip_vision","type":"CLIP_VISION","link":1933,"label":"CLIP视觉","slot_index":1},{"name":"image","type":"IMAGE","link":2271,"label":"图像"},{"name":"model","type":"MODEL","link":2193,"label":"模型","slot_index":3},{"name":"attn_mask","type":"MASK","link":2268,"label":"关注层遮罩"}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2054],"shape":3,"label":"模型","slot_index":0}],"properties":{"Node name for S&R":"IPAdapterApply"},"widgets_values":[1,0,"original",0,1,false]},{"id":305,"type":"CLIPTextEncode","pos":[1312.8751658778006,-780],"size":{"0":410,"1":270},"flags":{},"order":16,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":588,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[570],"shape":3,"label":"条件","slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":303,"type":"CheckpointLoaderSimple","pos":[1022.8751658778006,-880],"size":{"0":260,"1":110},"flags":{},"order":9,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[2041],"shape":3,"label":"模型","slot_index":0},{"name":"CLIP","type":"CLIP","links":[587,588],"shape":3,"label":"CLIP","slot_index":1},{"name":"VAE","type":"VAE","links":[598,2264],"shape":3,"label":"VAE","slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["realisticVisionV60B1_v60B1VAE.safetensors"]},{"id":304,"type":"CLIPTextEncode","pos":[1330,-1120],"size":{"0":420,"1":270},"flags":{},"order":15,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":587,"label":"CLIP"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[569],"shape":3,"label":"条件","slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":313,"type":"VAEDecode","pos":[2062.875165877798,-1080],"size":{"0":210,"1":46},"flags":{},"order":60,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":597,"label":"Latent"},{"name":"vae","type":"VAE","link":598,"label":"VAE","slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1960,2240],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":1011,"type":"ReActorFaceSwap","pos":[2610,-1110],"size":{"0":315,"1":338},"flags":{},"order":62,"mode":0,"inputs":[{"name":"input_image","type":"IMAGE","link":2240,"label":"目标图像"},{"name":"source_image","type":"IMAGE","link":2357,"label":"源图像"},{"name":"face_model","type":"FACE_MODEL","link":null,"label":"面部模型"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1902,2349],"shape":3,"label":"图像","slot_index":0},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3,"label":"面部模型"}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","retinaface_resnet50","codeformer.pth",1,0.5,"no","no","0","0",1]},{"id":737,"type":"ImageScale","pos":[-1670,-330],"size":{"0":315,"1":130},"flags":{},"order":30,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":1326,"label":"图像"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1327,1339,2271,2272,2319,2360],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":1167,"type":"InpaintPreprocessor","pos":[-39.98608250976046,-700.3094572265607],"size":{"0":210,"1":46},"flags":{},"order":54,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2272,"label":"图像"},{"name":"mask","type":"MASK","link":2382,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2246],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"InpaintPreprocessor"}},{"id":302,"type":"SetLatentNoiseMask","pos":[1762.8751658778006,-570],"size":{"0":210,"1":46},"flags":{"collapsed":false},"order":55,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":585,"label":"Latent"},{"name":"mask","type":"MASK","link":2383,"label":"遮罩"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[2326],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"SetLatentNoiseMask"}},{"id":696,"type":"MaskToImage","pos":[-1030,-450],"size":{"0":210,"1":26},"flags":{},"order":47,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2377,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1233],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":353,"type":"Image Paste Face","pos":[2600,-640],"size":{"0":315,"1":122},"flags":{},"order":64,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":2356,"label":"图像","slot_index":0},{"name":"crop_image","type":"IMAGE","link":2349,"label":"裁剪图像","slot_index":1},{"name":"crop_data","type":"CROP_DATA","link":2355,"label":"裁剪数据"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2286],"shape":3,"label":"图像","slot_index":0},{"name":"MASK_IMAGE","type":"IMAGE","links":[2167],"shape":3,"label":"遮罩图像","slot_index":1}],"properties":{"Node name for S&R":"Image Paste Face"},"widgets_values":[0.08,0]},{"id":1165,"type":"ACN_AdvancedControlNetApply","pos":[-58.599899153034734,-1001.680821504265],"size":{"0":340,"1":250},"flags":{},"order":57,"mode":0,"inputs":[{"name":"positive","type":"CONDITIONING","link":2247,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":2248,"label":"负面条件"},{"name":"control_net","type":"CONTROL_NET","link":2241,"label":"ControlNet","slot_index":2},{"name":"image","type":"IMAGE","link":2246,"label":"图像"},{"name":"mask_optional","type":"MASK","link":null,"label":"遮罩"},{"name":"timestep_kf","type":"TIMESTEP_KEYFRAME","link":2243,"label":"帧间隔"},{"name":"latent_kf_override","type":"LATENT_KEYFRAME","link":null,"label":""},{"name":"weights_override","type":"CONTROL_NET_WEIGHTS","link":2242,"label":"weights_override"}],"outputs":[{"name":"positive","type":"CONDITIONING","links":[2320],"shape":3,"label":"正面条件","slot_index":0},{"name":"negative","type":"CONDITIONING","links":[2250],"shape":3,"label":"负面条件","slot_index":1}],"properties":{"Node name for S&R":"ACN_AdvancedControlNetApply"},"widgets_values":[1,0.36,1]},{"id":1208,"type":"Mask Contour","pos":[-1180.5592960156243,-48.64817174999997],"size":{"0":210,"1":26},"flags":{},"order":42,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2366,"label":"mask","slot_index":0}],"outputs":[{"name":"MASK","type":"MASK","links":[2362],"shape":3,"label":"MASK","slot_index":0}],"properties":{"Node name for S&R":"Mask Contour"}},{"id":1207,"type":"GrowMask","pos":[-1180.5592960156243,31.351828250000008],"size":{"0":210,"1":82},"flags":{},"order":46,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2362,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2380,2384],"shape":3,"slot_index":0,"label":"遮罩"}],"properties":{"Node name for S&R":"GrowMask"},"widgets_values":[40,true]},{"id":1209,"type":"MaskToImage","pos":[-1170.5592960156243,171.35182824999995],"size":{"0":210,"1":26},"flags":{},"order":50,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2384,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2364],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":693,"type":"GrowMask","pos":[-1038.571508013362,-588.8267215994343],"size":{"0":210,"1":82},"flags":{},"order":43,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":1229,"label":"遮罩"}],"outputs":[{"name":"MASK","type":"MASK","links":[2377,2379],"shape":3,"slot_index":0,"label":"遮罩"}],"properties":{"Node name for S&R":"GrowMask"},"widgets_values":[40,true]},{"id":1214,"type":"PreviewImage","pos":[-710,-60],"size":{"0":210,"1":250},"flags":{},"order":58,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2372,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1205,"type":"Load BiseNet","pos":[-1180,-310],"size":{"0":210,"1":26},"flags":{},"order":10,"mode":0,"outputs":[{"name":"BISENET","type":"BISENET","links":[2359],"shape":3,"label":"BISENET"}],"properties":{"Node name for S&R":"Load BiseNet"}},{"id":1212,"type":"Masks Add","pos":[-720,-320],"size":{"0":210,"1":46},"flags":{},"order":49,"mode":0,"inputs":[{"name":"masks_a","type":"MASK","link":2379,"label":"masks_a"},{"name":"masks_b","type":"MASK","link":2380,"label":"masks_b"}],"outputs":[{"name":"MASKS","type":"MASK","links":[2381],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"Masks Add"}},{"id":1217,"type":"Mask Gaussian Region","pos":[-730,-230],"size":{"0":210,"1":60},"flags":{},"order":52,"mode":0,"inputs":[{"name":"masks","type":"MASK","link":2381,"label":"遮罩"}],"outputs":[{"name":"MASKS","type":"MASK","links":[2382,2383,2385],"shape":3,"label":"遮罩","slot_index":0}],"properties":{"Node name for S&R":"Mask Gaussian Region"},"widgets_values":[7]},{"id":1213,"type":"MaskToImage","pos":[-730,-130],"size":{"0":210,"1":26},"flags":{},"order":56,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":2385,"label":"遮罩"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2372],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":1204,"type":"Segment Face","pos":[-1190,-240],"size":{"0":220,"1":130},"flags":{},"order":36,"mode":0,"inputs":[{"name":"model","type":"BISENET","link":2359,"label":"model","slot_index":0},{"name":"image","type":"IMAGE","link":2360,"label":"image"}],"outputs":[{"name":"image","type":"IMAGE","links":[2386],"shape":3,"label":"image","slot_index":0},{"name":"mask","type":"MASK","links":[2366],"shape":3,"label":"mask","slot_index":1}],"properties":{"Node name for S&R":"Segment Face"},"widgets_values":[0,"disable","disable"]},{"id":1210,"type":"PreviewImage","pos":[-940,-50],"size":{"0":210,"1":246},"flags":{},"order":53,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2364,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":1218,"type":"PreviewImage","pos":[-950,-320],"size":{"0":210,"1":250},"flags":{},"order":41,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2386,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":301,"type":"VAEEncode","pos":[1750,-660],"size":{"0":210,"1":46},"flags":{},"order":35,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":2319,"label":"图像"},{"name":"vae","type":"VAE","link":2264,"label":"VAE"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[585],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"VAEEncode"}},{"id":300,"type":"KSampler","pos":[2010,-980],"size":{"0":320,"1":470},"flags":{},"order":59,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":2054,"label":"模型","slot_index":0},{"name":"positive","type":"CONDITIONING","link":2320,"label":"正面条件","slot_index":1},{"name":"negative","type":"CONDITIONING","link":2250,"label":"负面条件","slot_index":2},{"name":"latent_image","type":"LATENT","link":2326,"label":"Latent","slot_index":3}],"outputs":[{"name":"LATENT","type":"LATENT","links":[597],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[1035294316704806,"randomize",30,2.0300000000000002,"euler","normal",1]},{"id":1178,"type":"SaveImage","pos":[1340,280],"size":{"0":320,"1":470},"flags":{},"order":65,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2286,"label":"图像"}],"properties":{},"widgets_values":["ComfyUI"],"color":"#432","bgcolor":"#653"},{"id":1087,"type":"PreviewImage","pos":[1000,300],"size":{"0":320,"1":430},"flags":{},"order":21,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":2089,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#2a363b","bgcolor":"#3f5159"},{"id":286,"type":"LoadImage","pos":[690,290],"size":{"0":270,"1":400},"flags":{},"order":11,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1305,1306,1312,2269,2356],"shape":3,"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":[],"shape":3,"label":"遮罩","slot_index":1}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_vlcgb_00004_ (2).png","image"],"color":"#223","bgcolor":"#335"},{"id":1219,"type":"PrimitiveNode","pos":[1390,800],"size":{"0":210,"1":80},"flags":{},"order":12,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[2387],"widget":{"name":"weight"},"label":"FLOAT"}],"properties":{"Run widget replace on values":false},"widgets_values":[1,"fixed"],"color":"#432","bgcolor":"#653"},{"id":317,"type":"IPAdapterApply","pos":[670,-870],"size":{"0":320,"1":260},"flags":{},"order":23,"mode":0,"inputs":[{"name":"ipadapter","type":"IPADAPTER","link":607,"label":"IP适配","slot_index":0},{"name":"clip_vision","type":"CLIP_VISION","link":2048,"label":"CLIP视觉","slot_index":1},{"name":"image","type":"IMAGE","link":2206,"label":"图像"},{"name":"model","type":"MODEL","link":2041,"label":"模型"},{"name":"attn_mask","type":"MASK","link":null,"label":"关注层遮罩"},{"name":"weight","type":"FLOAT","link":2387,"widget":{"name":"weight"},"label":"权重","slot_index":5}],"outputs":[{"name":"MODEL","type":"MODEL","links":[2193],"shape":3,"label":"模型","slot_index":0}],"properties":{"Node name for S&R":"IPAdapterApply"},"widgets_values":[1,0,"original",0,1,false]},{"id":287,"type":"LoadImage","pos":[690,740],"size":{"0":280,"1":350},"flags":{},"order":13,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1898,2270,2357],"shape":3,"label":"图像","slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_vlcgb_00003_ (2).png","image"],"color":"#323","bgcolor":"#535"},{"id":1010,"type":"ReActorFaceSwap","pos":[1000,789.507790991211],"size":{"0":320,"1":340},"flags":{},"order":18,"mode":0,"inputs":[{"name":"input_image","type":"IMAGE","link":2269,"label":"目标图像"},{"name":"source_image","type":"IMAGE","link":1898,"label":"源图像"},{"name":"face_model","type":"FACE_MODEL","link":null,"label":"面部模型"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2089],"shape":3,"label":"图像","slot_index":0},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3,"label":"面部模型"}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","retinaface_resnet50","codeformer.pth",1,0.5,"no","no","0","0",1],"color":"#2a363b","bgcolor":"#3f5159"},{"id":1220,"type":"Note","pos":[1370,930],"size":{"0":280,"1":180},"flags":{},"order":14,"mode":0,"properties":{"text":""},"widgets_values":["You can adjust the similarity to source_image by the parameter above, the larger the value the closer to source_image, the smaller the value the closer to input_image.\nNumerical range 0-1"],"color":"#432","bgcolor":"#653"}],"links":[[569,304,0,294,0,"CONDITIONING"],[570,305,0,294,1,"CONDITIONING"],[571,295,0,294,2,"CONTROL_NET"],[572,328,0,294,3,"IMAGE"],[585,301,0,302,0,"LATENT"],[587,303,1,304,0,"CLIP"],[588,303,1,305,0,"CLIP"],[589,309,0,306,0,"SAM_MODEL"],[590,307,0,306,1,"SEGS"],[597,300,0,313,0,"LATENT"],[598,303,2,313,1,"VAE"],[607,318,0,317,0,"IPADAPTER"],[626,328,0,329,0,"IMAGE"],[647,349,0,348,0,"IPADAPTER"],[1229,694,0,693,0,"MASK"],[1233,696,0,697,0,"IMAGE"],[1305,286,0,307,1,"IMAGE"],[1306,286,0,306,2,"IMAGE"],[1307,306,0,726,0,"MASK"],[1308,726,2,727,1,"INT"],[1309,726,3,727,2,"INT"],[1310,726,4,727,3,"INT"],[1311,726,5,727,4,"INT"],[1312,286,0,727,0,"IMAGE"],[1326,727,0,737,0,"IMAGE"],[1327,737,0,728,0,"IMAGE"],[1333,726,0,311,0,"MASK"],[1339,737,0,328,0,"IMAGE"],[1367,311,0,756,0,"IMAGE"],[1368,756,0,757,0,"IMAGE"],[1374,757,0,694,0,"MASK"],[1430,756,0,788,0,"IMAGE"],[1898,287,0,1010,1,"IMAGE"],[1902,1011,0,868,0,"IMAGE"],[1912,306,0,1013,0,"MASK"],[1913,1013,0,1014,0,"IMAGE"],[1933,1020,0,348,1,"CLIP_VISION"],[1960,313,0,1031,0,"IMAGE"],[1963,1016,0,1032,0,"MASK"],[1964,1032,0,1033,0,"IMAGE"],[2041,303,0,317,3,"MODEL"],[2048,319,0,317,1,"CLIP_VISION"],[2054,348,0,300,0,"MODEL"],[2089,1010,0,1087,0,"IMAGE"],[2097,308,0,307,0,"BBOX_DETECTOR"],[2167,353,1,1133,0,"IMAGE"],[2170,1134,0,294,7,"CONTROL_NET_WEIGHTS"],[2171,1134,1,294,5,"TIMESTEP_KEYFRAME"],[2193,317,0,348,3,"MODEL"],[2204,1150,0,1151,0,"IMAGE"],[2206,1150,0,317,2,"IMAGE"],[2240,313,0,1011,0,"IMAGE"],[2241,1166,0,1165,2,"CONTROL_NET"],[2242,1134,0,1165,7,"CONTROL_NET_WEIGHTS"],[2243,1134,1,1165,5,"TIMESTEP_KEYFRAME"],[2246,1167,0,1165,3,"IMAGE"],[2247,294,0,1165,0,"CONDITIONING"],[2248,294,1,1165,1,"CONDITIONING"],[2250,1165,1,300,2,"CONDITIONING"],[2264,303,2,301,1,"VAE"],[2265,757,0,1016,0,"MASK"],[2268,1016,0,348,4,"MASK"],[2269,286,0,1010,0,"IMAGE"],[2270,287,0,1150,0,"IMAGE"],[2271,737,0,348,2,"IMAGE"],[2272,737,0,1167,0,"IMAGE"],[2286,353,0,1178,0,"IMAGE"],[2319,737,0,301,0,"IMAGE"],[2320,1165,0,300,1,"CONDITIONING"],[2326,302,0,300,3,"LATENT"],[2349,1011,0,353,1,"IMAGE"],[2355,726,1,353,2,"CROP_DATA"],[2356,286,0,353,0,"IMAGE"],[2357,287,0,1011,1,"IMAGE"],[2359,1205,0,1204,0,"BISENET"],[2360,737,0,1204,1,"IMAGE"],[2362,1208,0,1207,0,"MASK"],[2364,1209,0,1210,0,"IMAGE"],[2366,1204,1,1208,0,"MASK"],[2372,1213,0,1214,0,"IMAGE"],[2377,693,0,696,0,"MASK"],[2379,693,0,1212,0,"MASK"],[2380,1207,0,1212,1,"MASK"],[2381,1212,0,1217,0,"MASK"],[2382,1217,0,1167,1,"MASK"],[2383,1217,0,302,1,"MASK"],[2384,1207,0,1209,0,"MASK"],[2385,1217,0,1213,0,"MASK"],[2386,1204,0,1218,0,"IMAGE"],[2387,1219,0,317,5,"FLOAT"]],"groups":[{"title":"Face Detection","bounding":[-2029,-1193,968,447],"color":"#3f789e","font_size":24,"locked":false},{"title":"Face crop","bounding":[-2014,-711,665,524],"color":"#3f789e","font_size":24,"locked":false},{"title":"face mask","bounding":[-1046,-1185,579,410],"color":"#3f789e","font_size":24,"locked":false},{"title":"Matching Face Shape ","bounding":[1330,206,340,914],"color":"#b58b2a","font_size":24,"locked":false},{"title":"input&source","bounding":[680,216,300,884],"color":"#88A","font_size":24,"locked":false},{"title":"Face edge","bounding":[-1052,-752,470,338],"color":"#3f789e","font_size":24,"locked":false},{"title":"ReActor","bounding":[990,205,342,933],"color":"#3f789e","font_size":24,"locked":false},{"title":"Face Swap","bounding":[2594,-1183,580,422],"color":"#3f789e","font_size":24,"locked":false},{"title":"controlnet","bounding":[-448,-1185,740,924],"color":"#3f789e","font_size":24,"locked":false},{"title":"Facial Adjustment","bounding":[1013,-1184,1560,684],"color":"#3f789e","font_size":24,"locked":false},{"title":"paste face","bounding":[2588,-746,645,334],"color":"#3f789e","font_size":24,"locked":false},{"title":"IPA-context","bounding":[342,-578,595,582],"color":"#3f789e","font_size":24,"locked":false},{"title":"IPA-face","bounding":[307,-1186,685,582],"color":"#3f789e","font_size":24,"locked":false},{"title":"Face edge-2","bounding":[-1201,-393,720,604],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{},"version":0.4,"components":{}}